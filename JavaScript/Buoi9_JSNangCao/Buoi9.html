<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Nâng cao</title>
</head>
<body>
    <h2>10. Async/Await</h2>
    <p>Async dùng để khai báo một hàm bất đồng bộ</p>
    <p>Await dùng trong một hàm async dùng để đợi cho đến khi promise thực hiện xong mới chạy tới lệnh tiếp theo</p>
    <div id="categories"></div>
    <script>
        //cách 1
        fetch("https://dummyjson.com/products/categories")
        .then(response => response.json())
        .then(data => {
            // console.log(data);
            var categories = document.getElementById("categories");
            var htmls = "";
            data.forEach(item => {
                htmls += `<div class="item">${item.name}</div>`;
            });
            categories.innerHTML = htmls;
        })
        .catch(error => {
            console.error(error);
        });

        // cách 2: dùng async await
        async function fetchAPIAsyncAwait() { // khai báo hàm async
            const response = await fetch("https://dummyjson.com/products/categories"); //dùng await để đợi đến khi promise thực hiện xong
            const result = await response.json();
            console.log(result);
            var categories = document.getElementById("categories");
            var htmls = "";
            result.forEach(item => {
                htmls += `<div class="item">${item.name}</div>`;
            });
            categories.innerHTML = htmls;
        }
        fetchAPIAsyncAwait();

    </script>
</body>
</html>